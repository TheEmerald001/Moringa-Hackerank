{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"groupId\", \"children\"];\nimport * as React from 'react';\nimport { isLeaf } from '../../../models/gridColumnGrouping';\nimport { gridColumnGroupsLookupSelector } from './gridColumnGroupsSelector';\nimport { gridColumnLookupSelector } from '../columns/gridColumnsSelector';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nexport function hasGroupPath(lookupElement) {\n  return lookupElement.groupPath !== undefined;\n} // This is the recurrence function that help writing `unwrapGroupingColumnModel()`\n\nconst recurrentUnwrapGroupingColumnModel = (columnGroupNode, parents, unwrappedGroupingModelToComplet) => {\n  if (isLeaf(columnGroupNode)) {\n    if (unwrappedGroupingModelToComplet[columnGroupNode.field] !== undefined) {\n      throw new Error([`MUI: columnGroupingModel contains duplicated field`, `column field ${columnGroupNode.field} occurrs two times in the grouping model:`, `- ${unwrappedGroupingModelToComplet[columnGroupNode.field].join(' > ')}`, `- ${parents.join(' > ')}`].join('\\n'));\n    }\n\n    unwrappedGroupingModelToComplet[columnGroupNode.field] = parents;\n    return;\n  }\n\n  const {\n    groupId,\n    children\n  } = columnGroupNode;\n  children.forEach(child => {\n    recurrentUnwrapGroupingColumnModel(child, [...parents, groupId], unwrappedGroupingModelToComplet);\n  });\n};\n/**\n * This is a function that provide for each column the array of its parents.\n * Parents are ordered from the root to the leaf.\n * @param columnGroupingModel The model such as provided in DataGrid props\n * @returns An object `{[field]: groupIds}` where `groupIds` is the parents of the column `field`\n */\n\n\nexport const unwrapGroupingColumnModel = columnGroupingModel => {\n  if (!columnGroupingModel) {\n    return {};\n  }\n\n  const unwrappedSubTree = {};\n  columnGroupingModel.forEach(columnGroupNode => {\n    recurrentUnwrapGroupingColumnModel(columnGroupNode, [], unwrappedSubTree);\n  });\n  return unwrappedSubTree;\n};\n\nconst createGroupLookup = columnGroupingModel => {\n  let groupLookup = {};\n  columnGroupingModel.forEach(node => {\n    if (isLeaf(node)) {\n      return;\n    }\n\n    const {\n      groupId,\n      children\n    } = node,\n          other = _objectWithoutPropertiesLoose(node, _excluded);\n\n    if (!groupId) {\n      throw new Error('MUI: An element of the columnGroupingModel does not have either `field` or `groupId`.');\n    }\n\n    if (!children) {\n      console.warn(`MUI: group groupId=${groupId} has no children.`);\n    }\n\n    const groupParam = _extends({}, other, {\n      groupId\n    });\n\n    const subTreeLookup = createGroupLookup(children);\n\n    if (subTreeLookup[groupId] !== undefined || groupLookup[groupId] !== undefined) {\n      throw new Error(`MUI: The groupId ${groupId} is used multiple times in the columnGroupingModel.`);\n    }\n\n    groupLookup = _extends({}, groupLookup, subTreeLookup, {\n      [groupId]: groupParam\n    });\n  });\n  return _extends({}, groupLookup);\n};\n\nexport const columnGroupsStateInitializer = (state, props) => {\n  var _props$columnGrouping;\n\n  const groupLookup = createGroupLookup((_props$columnGrouping = props.columnGroupingModel) != null ? _props$columnGrouping : []);\n  return _extends({}, state, {\n    columnGrouping: {\n      lookup: groupLookup,\n      groupCollapsedModel: {}\n    }\n  });\n};\n/**\n * @requires useGridColumns (method, event)\n * @requires useGridParamsApi (method)\n */\n\nexport const useGridColumnGrouping = (apiRef, props) => {\n  var _props$experimentalFe2;\n  /**\n   * API METHODS\n   */\n\n\n  const getColumnGroupPath = React.useCallback(field => {\n    var _columnLookup$field$g, _columnLookup$field;\n\n    const columnLookup = gridColumnLookupSelector(apiRef);\n    return (_columnLookup$field$g = (_columnLookup$field = columnLookup[field]) == null ? void 0 : _columnLookup$field.groupPath) != null ? _columnLookup$field$g : [];\n  }, [apiRef]);\n  const getAllGroupDetails = React.useCallback(() => {\n    const columnGroupLookup = gridColumnGroupsLookupSelector(apiRef);\n    return columnGroupLookup;\n  }, [apiRef]);\n  const columnGroupingApi = {\n    unstable_getColumnGroupPath: getColumnGroupPath,\n    unstable_getAllGroupDetails: getAllGroupDetails\n  };\n  useGridApiMethod(apiRef, columnGroupingApi, 'GridColumnGroupingApi');\n  /**\n   * EFFECTS\n   */\n  // The effect does not track any value defined synchronously during the 1st render by hooks called after `useGridColumns`\n  // As a consequence, the state generated by the 1st run of this useEffect will always be equal to the initialization one\n\n  const isFirstRender = React.useRef(true);\n  React.useEffect(() => {\n    var _props$experimentalFe, _props$columnGrouping2;\n\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    if (!((_props$experimentalFe = props.experimentalFeatures) != null && _props$experimentalFe.columnGrouping)) {\n      return;\n    }\n\n    const groupLookup = createGroupLookup((_props$columnGrouping2 = props.columnGroupingModel) != null ? _props$columnGrouping2 : []);\n    apiRef.current.setState(state => _extends({}, state, {\n      columnGrouping: _extends({}, state.columnGrouping, {\n        lookup: groupLookup\n      })\n    }));\n  }, [apiRef, props.columnGroupingModel, (_props$experimentalFe2 = props.experimentalFeatures) == null ? void 0 : _props$experimentalFe2.columnGrouping]);\n};","map":{"version":3,"sources":["/home/shaki/phase-5-project/Moringa-Hackerank1/Moringa-Hackerank/client/node_modules/@mui/x-data-grid/hooks/features/columnGrouping/useGridColumnGrouping.js"],"names":["_extends","_objectWithoutPropertiesLoose","_excluded","React","isLeaf","gridColumnGroupsLookupSelector","gridColumnLookupSelector","useGridApiMethod","hasGroupPath","lookupElement","groupPath","undefined","recurrentUnwrapGroupingColumnModel","columnGroupNode","parents","unwrappedGroupingModelToComplet","field","Error","join","groupId","children","forEach","child","unwrapGroupingColumnModel","columnGroupingModel","unwrappedSubTree","createGroupLookup","groupLookup","node","other","console","warn","groupParam","subTreeLookup","columnGroupsStateInitializer","state","props","_props$columnGrouping","columnGrouping","lookup","groupCollapsedModel","useGridColumnGrouping","apiRef","_props$experimentalFe2","getColumnGroupPath","useCallback","_columnLookup$field$g","_columnLookup$field","columnLookup","getAllGroupDetails","columnGroupLookup","columnGroupingApi","unstable_getColumnGroupPath","unstable_getAllGroupDetails","isFirstRender","useRef","useEffect","_props$experimentalFe","_props$columnGrouping2","current","experimentalFeatures","setState"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,oCAArB;AACA,OAAOC,6BAAP,MAA0C,yDAA1C;AACA,MAAMC,SAAS,GAAG,CAAC,SAAD,EAAY,UAAZ,CAAlB;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AACA,SAASC,MAAT,QAAuB,oCAAvB;AACA,SAASC,8BAAT,QAA+C,4BAA/C;AACA,SAASC,wBAAT,QAAyC,gCAAzC;AACA,SAASC,gBAAT,QAAiC,8BAAjC;AACA,OAAO,SAASC,YAAT,CAAsBC,aAAtB,EAAqC;AAC1C,SAAOA,aAAa,CAACC,SAAd,KAA4BC,SAAnC;AACD,C,CAED;;AACA,MAAMC,kCAAkC,GAAG,CAACC,eAAD,EAAkBC,OAAlB,EAA2BC,+BAA3B,KAA+D;AACxG,MAAIX,MAAM,CAACS,eAAD,CAAV,EAA6B;AAC3B,QAAIE,+BAA+B,CAACF,eAAe,CAACG,KAAjB,CAA/B,KAA2DL,SAA/D,EAA0E;AACxE,YAAM,IAAIM,KAAJ,CAAU,CAAE,oDAAF,EAAwD,gBAAeJ,eAAe,CAACG,KAAM,2CAA7F,EAA0I,KAAID,+BAA+B,CAACF,eAAe,CAACG,KAAjB,CAA/B,CAAuDE,IAAvD,CAA4D,KAA5D,CAAmE,EAAjN,EAAqN,KAAIJ,OAAO,CAACI,IAAR,CAAa,KAAb,CAAoB,EAA7O,EAAgPA,IAAhP,CAAqP,IAArP,CAAV,CAAN;AACD;;AAEDH,IAAAA,+BAA+B,CAACF,eAAe,CAACG,KAAjB,CAA/B,GAAyDF,OAAzD;AACA;AACD;;AAED,QAAM;AACJK,IAAAA,OADI;AAEJC,IAAAA;AAFI,MAGFP,eAHJ;AAIAO,EAAAA,QAAQ,CAACC,OAAT,CAAiBC,KAAK,IAAI;AACxBV,IAAAA,kCAAkC,CAACU,KAAD,EAAQ,CAAC,GAAGR,OAAJ,EAAaK,OAAb,CAAR,EAA+BJ,+BAA/B,CAAlC;AACD,GAFD;AAGD,CAjBD;AAkBA;AACA;AACA;AACA;AACA;AACA;;;AAGA,OAAO,MAAMQ,yBAAyB,GAAGC,mBAAmB,IAAI;AAC9D,MAAI,CAACA,mBAAL,EAA0B;AACxB,WAAO,EAAP;AACD;;AAED,QAAMC,gBAAgB,GAAG,EAAzB;AACAD,EAAAA,mBAAmB,CAACH,OAApB,CAA4BR,eAAe,IAAI;AAC7CD,IAAAA,kCAAkC,CAACC,eAAD,EAAkB,EAAlB,EAAsBY,gBAAtB,CAAlC;AACD,GAFD;AAGA,SAAOA,gBAAP;AACD,CAVM;;AAYP,MAAMC,iBAAiB,GAAGF,mBAAmB,IAAI;AAC/C,MAAIG,WAAW,GAAG,EAAlB;AACAH,EAAAA,mBAAmB,CAACH,OAApB,CAA4BO,IAAI,IAAI;AAClC,QAAIxB,MAAM,CAACwB,IAAD,CAAV,EAAkB;AAChB;AACD;;AAED,UAAM;AACJT,MAAAA,OADI;AAEJC,MAAAA;AAFI,QAGFQ,IAHJ;AAAA,UAIMC,KAAK,GAAG5B,6BAA6B,CAAC2B,IAAD,EAAO1B,SAAP,CAJ3C;;AAMA,QAAI,CAACiB,OAAL,EAAc;AACZ,YAAM,IAAIF,KAAJ,CAAU,uFAAV,CAAN;AACD;;AAED,QAAI,CAACG,QAAL,EAAe;AACbU,MAAAA,OAAO,CAACC,IAAR,CAAc,sBAAqBZ,OAAQ,mBAA3C;AACD;;AAED,UAAMa,UAAU,GAAGhC,QAAQ,CAAC,EAAD,EAAK6B,KAAL,EAAY;AACrCV,MAAAA;AADqC,KAAZ,CAA3B;;AAIA,UAAMc,aAAa,GAAGP,iBAAiB,CAACN,QAAD,CAAvC;;AAEA,QAAIa,aAAa,CAACd,OAAD,CAAb,KAA2BR,SAA3B,IAAwCgB,WAAW,CAACR,OAAD,CAAX,KAAyBR,SAArE,EAAgF;AAC9E,YAAM,IAAIM,KAAJ,CAAW,oBAAmBE,OAAQ,qDAAtC,CAAN;AACD;;AAEDQ,IAAAA,WAAW,GAAG3B,QAAQ,CAAC,EAAD,EAAK2B,WAAL,EAAkBM,aAAlB,EAAiC;AACrD,OAACd,OAAD,GAAWa;AAD0C,KAAjC,CAAtB;AAGD,GAhCD;AAiCA,SAAOhC,QAAQ,CAAC,EAAD,EAAK2B,WAAL,CAAf;AACD,CApCD;;AAsCA,OAAO,MAAMO,4BAA4B,GAAG,CAACC,KAAD,EAAQC,KAAR,KAAkB;AAC5D,MAAIC,qBAAJ;;AAEA,QAAMV,WAAW,GAAGD,iBAAiB,CAAC,CAACW,qBAAqB,GAAGD,KAAK,CAACZ,mBAA/B,KAAuD,IAAvD,GAA8Da,qBAA9D,GAAsF,EAAvF,CAArC;AACA,SAAOrC,QAAQ,CAAC,EAAD,EAAKmC,KAAL,EAAY;AACzBG,IAAAA,cAAc,EAAE;AACdC,MAAAA,MAAM,EAAEZ,WADM;AAEda,MAAAA,mBAAmB,EAAE;AAFP;AADS,GAAZ,CAAf;AAMD,CAVM;AAWP;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,qBAAqB,GAAG,CAACC,MAAD,EAASN,KAAT,KAAmB;AACtD,MAAIO,sBAAJ;AAEA;AACF;AACA;;;AACE,QAAMC,kBAAkB,GAAGzC,KAAK,CAAC0C,WAAN,CAAkB7B,KAAK,IAAI;AACpD,QAAI8B,qBAAJ,EAA2BC,mBAA3B;;AAEA,UAAMC,YAAY,GAAG1C,wBAAwB,CAACoC,MAAD,CAA7C;AACA,WAAO,CAACI,qBAAqB,GAAG,CAACC,mBAAmB,GAAGC,YAAY,CAAChC,KAAD,CAAnC,KAA+C,IAA/C,GAAsD,KAAK,CAA3D,GAA+D+B,mBAAmB,CAACrC,SAA5G,KAA0H,IAA1H,GAAiIoC,qBAAjI,GAAyJ,EAAhK;AACD,GAL0B,EAKxB,CAACJ,MAAD,CALwB,CAA3B;AAMA,QAAMO,kBAAkB,GAAG9C,KAAK,CAAC0C,WAAN,CAAkB,MAAM;AACjD,UAAMK,iBAAiB,GAAG7C,8BAA8B,CAACqC,MAAD,CAAxD;AACA,WAAOQ,iBAAP;AACD,GAH0B,EAGxB,CAACR,MAAD,CAHwB,CAA3B;AAIA,QAAMS,iBAAiB,GAAG;AACxBC,IAAAA,2BAA2B,EAAER,kBADL;AAExBS,IAAAA,2BAA2B,EAAEJ;AAFL,GAA1B;AAIA1C,EAAAA,gBAAgB,CAACmC,MAAD,EAASS,iBAAT,EAA4B,uBAA5B,CAAhB;AACA;AACF;AACA;AACE;AACA;;AAEA,QAAMG,aAAa,GAAGnD,KAAK,CAACoD,MAAN,CAAa,IAAb,CAAtB;AACApD,EAAAA,KAAK,CAACqD,SAAN,CAAgB,MAAM;AACpB,QAAIC,qBAAJ,EAA2BC,sBAA3B;;AAEA,QAAIJ,aAAa,CAACK,OAAlB,EAA2B;AACzBL,MAAAA,aAAa,CAACK,OAAd,GAAwB,KAAxB;AACA;AACD;;AAED,QAAI,EAAE,CAACF,qBAAqB,GAAGrB,KAAK,CAACwB,oBAA/B,KAAwD,IAAxD,IAAgEH,qBAAqB,CAACnB,cAAxF,CAAJ,EAA6G;AAC3G;AACD;;AAED,UAAMX,WAAW,GAAGD,iBAAiB,CAAC,CAACgC,sBAAsB,GAAGtB,KAAK,CAACZ,mBAAhC,KAAwD,IAAxD,GAA+DkC,sBAA/D,GAAwF,EAAzF,CAArC;AACAhB,IAAAA,MAAM,CAACiB,OAAP,CAAeE,QAAf,CAAwB1B,KAAK,IAAInC,QAAQ,CAAC,EAAD,EAAKmC,KAAL,EAAY;AACnDG,MAAAA,cAAc,EAAEtC,QAAQ,CAAC,EAAD,EAAKmC,KAAK,CAACG,cAAX,EAA2B;AACjDC,QAAAA,MAAM,EAAEZ;AADyC,OAA3B;AAD2B,KAAZ,CAAzC;AAKD,GAlBD,EAkBG,CAACe,MAAD,EAASN,KAAK,CAACZ,mBAAf,EAAoC,CAACmB,sBAAsB,GAAGP,KAAK,CAACwB,oBAAhC,KAAyD,IAAzD,GAAgE,KAAK,CAArE,GAAyEjB,sBAAsB,CAACL,cAApI,CAlBH;AAmBD,CA/CM","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"groupId\", \"children\"];\nimport * as React from 'react';\nimport { isLeaf } from '../../../models/gridColumnGrouping';\nimport { gridColumnGroupsLookupSelector } from './gridColumnGroupsSelector';\nimport { gridColumnLookupSelector } from '../columns/gridColumnsSelector';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nexport function hasGroupPath(lookupElement) {\n  return lookupElement.groupPath !== undefined;\n}\n\n// This is the recurrence function that help writing `unwrapGroupingColumnModel()`\nconst recurrentUnwrapGroupingColumnModel = (columnGroupNode, parents, unwrappedGroupingModelToComplet) => {\n  if (isLeaf(columnGroupNode)) {\n    if (unwrappedGroupingModelToComplet[columnGroupNode.field] !== undefined) {\n      throw new Error([`MUI: columnGroupingModel contains duplicated field`, `column field ${columnGroupNode.field} occurrs two times in the grouping model:`, `- ${unwrappedGroupingModelToComplet[columnGroupNode.field].join(' > ')}`, `- ${parents.join(' > ')}`].join('\\n'));\n    }\n\n    unwrappedGroupingModelToComplet[columnGroupNode.field] = parents;\n    return;\n  }\n\n  const {\n    groupId,\n    children\n  } = columnGroupNode;\n  children.forEach(child => {\n    recurrentUnwrapGroupingColumnModel(child, [...parents, groupId], unwrappedGroupingModelToComplet);\n  });\n};\n/**\n * This is a function that provide for each column the array of its parents.\n * Parents are ordered from the root to the leaf.\n * @param columnGroupingModel The model such as provided in DataGrid props\n * @returns An object `{[field]: groupIds}` where `groupIds` is the parents of the column `field`\n */\n\n\nexport const unwrapGroupingColumnModel = columnGroupingModel => {\n  if (!columnGroupingModel) {\n    return {};\n  }\n\n  const unwrappedSubTree = {};\n  columnGroupingModel.forEach(columnGroupNode => {\n    recurrentUnwrapGroupingColumnModel(columnGroupNode, [], unwrappedSubTree);\n  });\n  return unwrappedSubTree;\n};\n\nconst createGroupLookup = columnGroupingModel => {\n  let groupLookup = {};\n  columnGroupingModel.forEach(node => {\n    if (isLeaf(node)) {\n      return;\n    }\n\n    const {\n      groupId,\n      children\n    } = node,\n          other = _objectWithoutPropertiesLoose(node, _excluded);\n\n    if (!groupId) {\n      throw new Error('MUI: An element of the columnGroupingModel does not have either `field` or `groupId`.');\n    }\n\n    if (!children) {\n      console.warn(`MUI: group groupId=${groupId} has no children.`);\n    }\n\n    const groupParam = _extends({}, other, {\n      groupId\n    });\n\n    const subTreeLookup = createGroupLookup(children);\n\n    if (subTreeLookup[groupId] !== undefined || groupLookup[groupId] !== undefined) {\n      throw new Error(`MUI: The groupId ${groupId} is used multiple times in the columnGroupingModel.`);\n    }\n\n    groupLookup = _extends({}, groupLookup, subTreeLookup, {\n      [groupId]: groupParam\n    });\n  });\n  return _extends({}, groupLookup);\n};\n\nexport const columnGroupsStateInitializer = (state, props) => {\n  var _props$columnGrouping;\n\n  const groupLookup = createGroupLookup((_props$columnGrouping = props.columnGroupingModel) != null ? _props$columnGrouping : []);\n  return _extends({}, state, {\n    columnGrouping: {\n      lookup: groupLookup,\n      groupCollapsedModel: {}\n    }\n  });\n};\n/**\n * @requires useGridColumns (method, event)\n * @requires useGridParamsApi (method)\n */\n\nexport const useGridColumnGrouping = (apiRef, props) => {\n  var _props$experimentalFe2;\n\n  /**\n   * API METHODS\n   */\n  const getColumnGroupPath = React.useCallback(field => {\n    var _columnLookup$field$g, _columnLookup$field;\n\n    const columnLookup = gridColumnLookupSelector(apiRef);\n    return (_columnLookup$field$g = (_columnLookup$field = columnLookup[field]) == null ? void 0 : _columnLookup$field.groupPath) != null ? _columnLookup$field$g : [];\n  }, [apiRef]);\n  const getAllGroupDetails = React.useCallback(() => {\n    const columnGroupLookup = gridColumnGroupsLookupSelector(apiRef);\n    return columnGroupLookup;\n  }, [apiRef]);\n  const columnGroupingApi = {\n    unstable_getColumnGroupPath: getColumnGroupPath,\n    unstable_getAllGroupDetails: getAllGroupDetails\n  };\n  useGridApiMethod(apiRef, columnGroupingApi, 'GridColumnGroupingApi');\n  /**\n   * EFFECTS\n   */\n  // The effect does not track any value defined synchronously during the 1st render by hooks called after `useGridColumns`\n  // As a consequence, the state generated by the 1st run of this useEffect will always be equal to the initialization one\n\n  const isFirstRender = React.useRef(true);\n  React.useEffect(() => {\n    var _props$experimentalFe, _props$columnGrouping2;\n\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    if (!((_props$experimentalFe = props.experimentalFeatures) != null && _props$experimentalFe.columnGrouping)) {\n      return;\n    }\n\n    const groupLookup = createGroupLookup((_props$columnGrouping2 = props.columnGroupingModel) != null ? _props$columnGrouping2 : []);\n    apiRef.current.setState(state => _extends({}, state, {\n      columnGrouping: _extends({}, state.columnGrouping, {\n        lookup: groupLookup\n      })\n    }));\n  }, [apiRef, props.columnGroupingModel, (_props$experimentalFe2 = props.experimentalFeatures) == null ? void 0 : _props$experimentalFe2.columnGrouping]);\n};"]},"metadata":{},"sourceType":"module"}