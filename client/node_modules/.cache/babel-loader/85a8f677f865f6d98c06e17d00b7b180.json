{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { useGridRegisterPipeProcessor } from '../../core/pipeProcessing';\nimport { gridPreferencePanelStateSelector } from './gridPreferencePanelSelector';\nexport const preferencePanelStateInitializer = (state, props) => {\n  var _props$initialState$p, _props$initialState;\n\n  return _extends({}, state, {\n    preferencePanel: (_props$initialState$p = (_props$initialState = props.initialState) == null ? void 0 : _props$initialState.preferencePanel) != null ? _props$initialState$p : {\n      open: false\n    }\n  });\n};\n/**\n * TODO: Add a single `setPreferencePanel` method to avoid multiple `setState`\n */\n\nexport const useGridPreferencesPanel = (apiRef, props) => {\n  var _props$initialState3;\n\n  const logger = useGridLogger(apiRef, 'useGridPreferencesPanel');\n  const hideTimeout = React.useRef();\n  const immediateTimeout = React.useRef();\n  /**\n   * API METHODS\n   */\n\n  const hidePreferences = React.useCallback(() => {\n    logger.debug('Hiding Preferences Panel');\n    const preferencePanelState = gridPreferencePanelStateSelector(apiRef.current.state);\n\n    if (preferencePanelState.openedPanelValue) {\n      apiRef.current.publishEvent('preferencePanelClose', {\n        openedPanelValue: preferencePanelState.openedPanelValue\n      });\n    }\n\n    apiRef.current.setState(state => _extends({}, state, {\n      preferencePanel: {\n        open: false\n      }\n    }));\n    apiRef.current.forceUpdate();\n  }, [apiRef, logger]); // This is to prevent the preferences from closing when you open a select box or another panel,\n  // The issue is in MUI core V4 => Fixed in V5\n\n  const doNotHidePanel = React.useCallback(() => {\n    immediateTimeout.current = setTimeout(() => clearTimeout(hideTimeout.current), 0);\n  }, []); // This is a hack for the issue with Core V4, by delaying hiding the panel on the clickAwayListener,\n  // we can cancel the action if the trigger element still need the panel...\n\n  const hidePreferencesDelayed = React.useCallback(() => {\n    hideTimeout.current = setTimeout(hidePreferences, 100);\n  }, [hidePreferences]);\n  const showPreferences = React.useCallback(newValue => {\n    logger.debug('Opening Preferences Panel');\n    doNotHidePanel();\n    apiRef.current.setState(state => _extends({}, state, {\n      preferencePanel: _extends({}, state.preferencePanel, {\n        open: true,\n        openedPanelValue: newValue\n      })\n    }));\n    apiRef.current.publishEvent('preferencePanelOpen', {\n      openedPanelValue: newValue\n    });\n    apiRef.current.forceUpdate();\n  }, [logger, doNotHidePanel, apiRef]);\n  useGridApiMethod(apiRef, {\n    showPreferences,\n    hidePreferences: hidePreferencesDelayed\n  }, 'ColumnMenuApi');\n  /**\n   * PRE-PROCESSING\n   */\n\n  const stateExportPreProcessing = React.useCallback((prevState, context) => {\n    var _props$initialState2;\n\n    const preferencePanelToExport = gridPreferencePanelStateSelector(apiRef.current.state);\n    const shouldExportPreferencePanel = // Always export if the `exportOnlyDirtyModels` property is activated\n    !context.exportOnlyDirtyModels || // Always export if the panel was initialized\n    ((_props$initialState2 = props.initialState) == null ? void 0 : _props$initialState2.preferencePanel) != null || // Always export if the panel is opened\n    preferencePanelToExport.open;\n\n    if (!shouldExportPreferencePanel) {\n      return prevState;\n    }\n\n    return _extends({}, prevState, {\n      preferencePanel: preferencePanelToExport\n    });\n  }, [apiRef, (_props$initialState3 = props.initialState) == null ? void 0 : _props$initialState3.preferencePanel]);\n  const stateRestorePreProcessing = React.useCallback((params, context) => {\n    const preferencePanel = context.stateToRestore.preferencePanel;\n\n    if (preferencePanel != null) {\n      apiRef.current.setState(state => _extends({}, state, {\n        preferencePanel\n      }));\n    }\n\n    return params;\n  }, [apiRef]);\n  useGridRegisterPipeProcessor(apiRef, 'exportState', stateExportPreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'restoreState', stateRestorePreProcessing);\n  /**\n   * EFFECTS\n   */\n\n  React.useEffect(() => {\n    return () => {\n      clearTimeout(hideTimeout.current);\n      clearTimeout(immediateTimeout.current);\n    };\n  }, []);\n};","map":{"version":3,"sources":["/home/shaki/phase-5-project/Moringa-Hackerank1/Moringa-Hackerank/client/node_modules/@mui/x-data-grid/hooks/features/preferencesPanel/useGridPreferencesPanel.js"],"names":["_extends","React","useGridApiMethod","useGridLogger","useGridRegisterPipeProcessor","gridPreferencePanelStateSelector","preferencePanelStateInitializer","state","props","_props$initialState$p","_props$initialState","preferencePanel","initialState","open","useGridPreferencesPanel","apiRef","_props$initialState3","logger","hideTimeout","useRef","immediateTimeout","hidePreferences","useCallback","debug","preferencePanelState","current","openedPanelValue","publishEvent","setState","forceUpdate","doNotHidePanel","setTimeout","clearTimeout","hidePreferencesDelayed","showPreferences","newValue","stateExportPreProcessing","prevState","context","_props$initialState2","preferencePanelToExport","shouldExportPreferencePanel","exportOnlyDirtyModels","stateRestorePreProcessing","params","stateToRestore","useEffect"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { useGridRegisterPipeProcessor } from '../../core/pipeProcessing';\nimport { gridPreferencePanelStateSelector } from './gridPreferencePanelSelector';\nexport const preferencePanelStateInitializer = (state, props) => {\n  var _props$initialState$p, _props$initialState;\n\n  return _extends({}, state, {\n    preferencePanel: (_props$initialState$p = (_props$initialState = props.initialState) == null ? void 0 : _props$initialState.preferencePanel) != null ? _props$initialState$p : {\n      open: false\n    }\n  });\n};\n/**\n * TODO: Add a single `setPreferencePanel` method to avoid multiple `setState`\n */\n\nexport const useGridPreferencesPanel = (apiRef, props) => {\n  var _props$initialState3;\n\n  const logger = useGridLogger(apiRef, 'useGridPreferencesPanel');\n  const hideTimeout = React.useRef();\n  const immediateTimeout = React.useRef();\n  /**\n   * API METHODS\n   */\n\n  const hidePreferences = React.useCallback(() => {\n    logger.debug('Hiding Preferences Panel');\n    const preferencePanelState = gridPreferencePanelStateSelector(apiRef.current.state);\n\n    if (preferencePanelState.openedPanelValue) {\n      apiRef.current.publishEvent('preferencePanelClose', {\n        openedPanelValue: preferencePanelState.openedPanelValue\n      });\n    }\n\n    apiRef.current.setState(state => _extends({}, state, {\n      preferencePanel: {\n        open: false\n      }\n    }));\n    apiRef.current.forceUpdate();\n  }, [apiRef, logger]); // This is to prevent the preferences from closing when you open a select box or another panel,\n  // The issue is in MUI core V4 => Fixed in V5\n\n  const doNotHidePanel = React.useCallback(() => {\n    immediateTimeout.current = setTimeout(() => clearTimeout(hideTimeout.current), 0);\n  }, []); // This is a hack for the issue with Core V4, by delaying hiding the panel on the clickAwayListener,\n  // we can cancel the action if the trigger element still need the panel...\n\n  const hidePreferencesDelayed = React.useCallback(() => {\n    hideTimeout.current = setTimeout(hidePreferences, 100);\n  }, [hidePreferences]);\n  const showPreferences = React.useCallback(newValue => {\n    logger.debug('Opening Preferences Panel');\n    doNotHidePanel();\n    apiRef.current.setState(state => _extends({}, state, {\n      preferencePanel: _extends({}, state.preferencePanel, {\n        open: true,\n        openedPanelValue: newValue\n      })\n    }));\n    apiRef.current.publishEvent('preferencePanelOpen', {\n      openedPanelValue: newValue\n    });\n    apiRef.current.forceUpdate();\n  }, [logger, doNotHidePanel, apiRef]);\n  useGridApiMethod(apiRef, {\n    showPreferences,\n    hidePreferences: hidePreferencesDelayed\n  }, 'ColumnMenuApi');\n  /**\n   * PRE-PROCESSING\n   */\n\n  const stateExportPreProcessing = React.useCallback((prevState, context) => {\n    var _props$initialState2;\n\n    const preferencePanelToExport = gridPreferencePanelStateSelector(apiRef.current.state);\n    const shouldExportPreferencePanel = // Always export if the `exportOnlyDirtyModels` property is activated\n    !context.exportOnlyDirtyModels || // Always export if the panel was initialized\n    ((_props$initialState2 = props.initialState) == null ? void 0 : _props$initialState2.preferencePanel) != null || // Always export if the panel is opened\n    preferencePanelToExport.open;\n\n    if (!shouldExportPreferencePanel) {\n      return prevState;\n    }\n\n    return _extends({}, prevState, {\n      preferencePanel: preferencePanelToExport\n    });\n  }, [apiRef, (_props$initialState3 = props.initialState) == null ? void 0 : _props$initialState3.preferencePanel]);\n  const stateRestorePreProcessing = React.useCallback((params, context) => {\n    const preferencePanel = context.stateToRestore.preferencePanel;\n\n    if (preferencePanel != null) {\n      apiRef.current.setState(state => _extends({}, state, {\n        preferencePanel\n      }));\n    }\n\n    return params;\n  }, [apiRef]);\n  useGridRegisterPipeProcessor(apiRef, 'exportState', stateExportPreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'restoreState', stateRestorePreProcessing);\n  /**\n   * EFFECTS\n   */\n\n  React.useEffect(() => {\n    return () => {\n      clearTimeout(hideTimeout.current);\n      clearTimeout(immediateTimeout.current);\n    };\n  }, []);\n};"]},"metadata":{},"sourceType":"module"}